"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[792],{8497:(t,a,e)=>{e.d(a,{Z:()=>o});var s=e(3645),n=e.n(s)()((function(t){return t[1]}));n.push([t.id,".container[data-v-7083fd54]{max-width:720px}.main-cont-comment[data-v-7083fd54]{border-radius:0 0 15px 0;box-shadow:2px 2px 2px rgba(0,0,0,.3);margin-top:30px;padding:6px 2px;position:relative;transition-duration:.2s}.text-comment[data-v-7083fd54]{font-size:16px}.content-text[data-v-7083fd54]{padding:5px 20px}.del[data-v-7083fd54]{color:#cc2a2a;right:8px}.del[data-v-7083fd54],.red[data-v-7083fd54]{cursor:pointer;position:absolute;top:8px}.red[data-v-7083fd54]{color:#1d621d;right:28px}.requst[data-v-7083fd54]{color:#0d6efd;cursor:pointer;padding:2px 20px}.message_answers[data-v-7083fd54]{color:#bf6fce;cursor:pointer}",""]);const o=n},8817:(t,a,e)=>{e.d(a,{Z:()=>o});var s=e(3645),n=e.n(s)()((function(t){return t[1]}));n.push([t.id,".loader[data-v-0d9e0eab]{-webkit-animation:loader-data-v-0d9e0eab 1.3s linear infinite;animation:loader-data-v-0d9e0eab 1.3s linear infinite;border:6px solid rgba(13,71,161,.6);border-left-color:#0d47a1;border-radius:50%;height:50px;left:50%;margin-left:-25px;position:fixed;top:50%;width:50px}@-webkit-keyframes loader-data-v-0d9e0eab{to{transform:rotate(1turn)}}@keyframes loader-data-v-0d9e0eab{to{transform:rotate(1turn)}}",""]);const o=n},7792:(t,a,e)=>{e.r(a),e.d(a,{default:()=>m});var s=e(142);const n={name:"Modal",props:["UpdateComm"],data:function(){return{}},methods:{updateMessage:function(){this.$emit("UpdateComm")}}};var o=e(1900);const i={name:"Index",components:{Modal:(0,o.Z)(n,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v("Закрыть")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:t.updateMessage}},[t._v("Обновить")])])])])])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Обновление текста")]),t._v(" "),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])}],!1,null,null,null).exports,Loader:e(8017).Z},data:function(){return{textar:null,mesControl:!1,mesControlAccept:!1,comments:null,openAnsw:null,authPlease:!1,textAnswer:null,countPage:2,dataModal:{},dataModalText:null}},mounted:function(){this.getComments(this.countPage)},methods:{getComments:function(t){var a=this;s.Z.get("/api/auth/comments/"+t).then((function(t){a.comments=t.data.data})).catch((function(t){a.authPlease=!0}))},sendComment:function(){var t=this;if(this.textar.length<=5)return this.mesControl=!0,this.mesControlAccept=!1,0;this.mesControl=!1,s.Z.post("/api/auth/comments",{content:this.textar}).then((function(a){"success"==a.data.status&&(t.mesControlAccept=!0),t.getComments(t.countPage)})).catch((function(t){}))},sendAnswComment:function(t){this.openAnsw=t},checkBlock:function(t){var a=t.target.nextElementSibling,e=a.dataset.countp;e++,a.dataset.countp=e;var s=a.children.length;if(a.dataset.countp>s)return 0;for(var n=0;n<e;n++)a.children[n].style.display="block"},sendCommentAnswer:function(t){var a=this;if(this.textAnswer.length<=5)return this.mesControl=!0,this.mesControlAccept=!1,0;s.Z.post("/api/auth/comments/answers",{comment_id:t,content:this.textAnswer}).then((function(t){"success"==t.data.status&&(a.mesControl=!1,a.mesControlAccept=!0),a.getComments(a.countPage),a.textAnswer=""})).catch((function(t){}))},moreComment:function(){this.countPage+=2,this.getComments(this.countPage)},updateComment:function(t,a,e,s){this.dataModalText=t,this.dataModal.id=a,this.dataModal.userid=e,this.dataModal.type=s},updateCommentAnsw:function(t,a,e,s){this.dataModalText=t,this.dataModal.id=a,this.dataModal.userid=e,this.dataModal.type=s},SendUpdate:function(){var t=this;"comment"===this.dataModal.type&&s.Z.patch("/api/auth/comments/"+this.dataModal.id,{user:this.dataModal.userid,content:this.dataModalText}).then((function(a){t.getComments(t.countPage)})),"answer"===this.dataModal.type&&s.Z.patch("/api/auth/comments/answers/"+this.dataModal.id,{user:this.dataModal.userid,content:this.dataModalText}).then((function(a){t.getComments(t.countPage)}))},deleteComment:function(t){var a=this;s.Z.delete("/api/auth/comments/answers/"+t).then((function(t){a.getComments(a.countPage)}))},deleteCommenMain:function(t){var a=this;s.Z.delete("/api/auth/comments/"+t).then((function(t){a.getComments(a.countPage)}))}}};var r=e(3379),d=e.n(r),l=e(8497),c={insert:"head",singleton:!1};d()(l.Z,c);l.Z.locals;const m=(0,o.Z)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.authPlease?e("div",{staticClass:"mt-3",staticStyle:{color:"red"}},[t._v("Авторизуйтесь \n        "),e("router-link",{attrs:{to:{name:"user.login"}}},[e("i",{staticClass:"fa fa-sign-in",attrs:{"aria-hidden":"true"}}),t._v(" "),e("span",[t._v("Войти")])])],1):t._e(),t._v(" "),t.authPlease?t._e():e("div",{staticClass:"container mt-5"},[e("Modal",{on:{UpdateComm:t.SendUpdate}},[e("p",[t._v(t._s(t.dataModalText))]),t._v(" "),e("label",{staticClass:"form-label",attrs:{for:"exampleFormControlTextarea1"}},[t._v("Ваш текст")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dataModalText,expression:"dataModalText"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"5"},domProps:{value:t.dataModalText},on:{input:function(a){a.target.composing||(t.dataModalText=a.target.value)}}},[t._v(t._s(t.dataModalText))])]),t._v(" "),e("h2",[t._v("Оставить ваш комментарий")]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("Ваше сообщение")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textar,expression:"textar"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"3"},domProps:{value:t.textar},on:{input:function(a){a.target.composing||(t.textar=a.target.value)}}})]),t._v(" "),e("button",{staticClass:"btn btn-primary mt-3",on:{click:t.sendComment}},[t._v("Отправить")]),t._v(" "),t.mesControl?e("div",{staticClass:"mt-3"},[e("h3",{staticStyle:{color:"red"}},[t._v("Сообщение должно быть более 5 символов")])]):t._e(),t._v(" "),t.mesControlAccept?e("div",{staticClass:"mt-3"},[e("h3",{staticStyle:{color:"green"}},[t._v("Сообщение отправленно")])]):t._e(),t._v(" "),e("h3",{staticClass:"mt-5"},[t._v("Сообщения:")]),t._v(" "),t.comments?t._e():e("Loader"),t._v(" "),t.comments?e("div",{staticClass:"mt-1"},t._l(t.comments,(function(a){return e("div",{key:a.id},[e("div",{staticClass:"main-cont-comment"},[1===a.user.status?e("div",{staticClass:"del",on:{click:function(e){return t.deleteCommenMain(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),1===a.user.status?e("div",{staticClass:"red",attrs:{"data-bs-toggle":"modal","data-bs-target":"#exampleModal"},on:{click:function(e){return t.updateComment(a.content,a.id,a.user_id,"comment")}}},[e("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),e("div",{staticClass:"text-comment"},[e("i",{staticClass:"fa fa-user-circle-o",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(a.user.name))]),t._v(" "),e("div",{staticClass:"content-text"},[t._v(" "+t._s(a.content))]),t._v(" "),e("div",{staticClass:"requst",on:{click:function(e){return t.sendAnswComment(a.id)}}},[e("i",{staticClass:"fa fa-hand-paper-o",attrs:{"aria-hidden":"true"}}),t._v(" Ответить")]),t._v(" "),t.openAnsw===a.id?e("div",{staticClass:"p-3"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("Ваше сообщение")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textAnswer,expression:"textAnswer"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"3"},domProps:{value:t.textAnswer},on:{input:function(a){a.target.composing||(t.textAnswer=a.target.value)}}})]),t._v(" "),e("button",{staticClass:"btn btn-primary mt-3",on:{click:function(e){return t.sendCommentAnswer(a.id)}}},[t._v("Отправить")])]):t._e()]),t._v(" "),e("br"),t._v(" "),e("h6",[t._v("Ответы: "+t._s(a.comments_answ.length))]),t._v(" "),a.comments_answ.length?e("h6",{staticClass:"message_answers",on:{click:t.checkBlock}},[t._v("Показать ответы ++")]):t._e(),t._v(" "),e("div",{staticClass:"blockPagin",attrs:{"data-countp":"0"}},t._l(a.comments_answ,(function(s){return e("div",{key:s.id,staticStyle:{"padding-left":"20px",display:"none"}},[e("div",{staticClass:"main-cont-comment mt-1"},[1===s.user.status?e("div",{staticClass:"del",on:{click:function(a){return t.deleteComment(s.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),1===s.user.status?e("div",{staticClass:"red",attrs:{"data-bs-toggle":"modal","data-bs-target":"#exampleModal"},on:{click:function(a){return t.updateCommentAnsw(s.content,s.id,s.user_id,"answer")}}},[e("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),e("div",{staticClass:"text-comment"},[e("i",{staticClass:"fa fa-user-circle-o",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(s.user.name))]),t._v(" "),e("div",{staticClass:"content-text"},[t._v(" "+t._s(s.content))]),t._v(" "),e("div",{staticClass:"requst",on:{click:function(e){return t.sendAnswComment(a.id)}}},[e("i",{staticClass:"fa fa-hand-paper-o",attrs:{"aria-hidden":"true"}}),t._v(" Ответить")])])])})),0),t._v(" "),e("br"),t._v(" "),e("br")])})),0):t._e(),t._v(" "),e("button",{staticClass:"btn btn-primary",on:{click:t.moreComment}},[t._v("Показать еще комментарии")])],1),t._v(" "),e("div",{staticStyle:{height:"200px"}})])}),[],!1,null,"7083fd54",null).exports},8017:(t,a,e)=>{e.d(a,{Z:()=>d});const s={name:"Loader"};var n=e(3379),o=e.n(n),i=e(8817),r={insert:"head",singleton:!1};o()(i.Z,r);i.Z.locals;const d=(0,e(1900).Z)(s,(function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("div",{staticClass:"loader"})])}],!1,null,"0d9e0eab",null).exports}}]);